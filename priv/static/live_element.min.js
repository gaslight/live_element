var LiveView=(()=>{var un=Object.create;var Be=Object.defineProperty;var dn=Object.getOwnPropertyDescriptor;var fn=Object.getOwnPropertyNames,si=Object.getOwnPropertySymbols,pn=Object.getPrototypeOf,oi=Object.prototype.hasOwnProperty,gn=Object.prototype.propertyIsEnumerable;var ai=(r,e,t)=>e in r?Be(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Te=(r,e)=>{for(var t in e||(e={}))oi.call(e,t)&&ai(r,t,e[t]);if(si)for(var t of si(e))gn.call(e,t)&&ai(r,t,e[t]);return r};var li=r=>Be(r,"__esModule",{value:!0});var mn=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),vn=(r,e)=>{li(r);for(var t in e)Be(r,t,{get:e[t],enumerable:!0})},yn=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fn(e))!oi.call(r,i)&&i!=="default"&&Be(r,i,{get:()=>e[i],enumerable:!(t=dn(e,i))||t.enumerable});return r},bn=r=>yn(li(Be(r!=null?un(pn(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var hi=(r,e,t)=>new Promise((i,n)=>{var s=c=>{try{h(t.next(c))}catch(f){n(f)}},o=c=>{try{h(t.throw(c))}catch(f){n(f)}},h=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);h((t=t.apply(r,e)).next())});var an=mn((ot,ni)=>{(function(r,e){typeof ot=="object"&&typeof ni=="object"?ni.exports=e():typeof define=="function"&&define.amd?define([],e):typeof ot=="object"?ot.Phoenix=e():r.Phoenix=e()})(ot,function(){return function(r){var e={};function t(i){if(e[i])return e[i].exports;var n=e[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=r,t.c=e,t.d=function(i,n,s){t.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:s})},t.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,n){if(1&n&&(i=t(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var o in i)t.d(s,o,function(h){return i[h]}.bind(null,o));return s},t.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(n,"a",n),n},t.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},t.p="",t(t.s=0)}([function(r,e,t){(function(i){r.exports=i.Phoenix=t(2)}).call(this,t(1))},function(r,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(i){typeof window=="object"&&(t=window)}r.exports=t},function(r,e,t){"use strict";function i(p){return function(a){if(Array.isArray(a))return h(a)}(p)||function(a){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(a))return Array.from(a)}(p)||o(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function n(p){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(p)}function s(p,a){return function(l){if(Array.isArray(l))return l}(p)||function(l,u){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(l)))){var d=[],E=!0,_=!1,b=void 0;try{for(var S,C=l[Symbol.iterator]();!(E=(S=C.next()).done)&&(d.push(S.value),!u||d.length!==u);E=!0);}catch(I){_=!0,b=I}finally{try{E||C.return==null||C.return()}finally{if(_)throw b}}return d}}(p,a)||o(p,a)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(p,a){if(p){if(typeof p=="string")return h(p,a);var l=Object.prototype.toString.call(p).slice(8,-1);return l==="Object"&&p.constructor&&(l=p.constructor.name),l==="Map"||l==="Set"?Array.from(l):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?h(p,a):void 0}}function h(p,a){(a==null||a>p.length)&&(a=p.length);for(var l=0,u=new Array(a);l<a;l++)u[l]=p[l];return u}function c(p,a){if(!(p instanceof a))throw new TypeError("Cannot call a class as a function")}function f(p,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(p,u.key,u)}}function A(p,a,l){return a&&f(p.prototype,a),l&&f(p,l),p}t.r(e),t.d(e,"Channel",function(){return P}),t.d(e,"Serializer",function(){return R}),t.d(e,"Socket",function(){return J}),t.d(e,"LongPoll",function(){return W}),t.d(e,"Ajax",function(){return F}),t.d(e,"Presence",function(){return Pe});var m=typeof self!="undefined"?self:null,y=typeof window!="undefined"?window:null,T=m||y||void 0,L=0,k=1,K=2,M=3,V="closed",Y="errored",v="joined",O="joining",je="leaving",Z="phx_close",Fe="phx_error",N="phx_join",he="phx_reply",ke="phx_leave",Xe=[Z,Fe,N,he,ke],xt="longpoll",Ce="websocket",x=function(p){return typeof p=="function"?p:function(){return p}},w=function(){function p(a,l,u,d){c(this,p),this.channel=a,this.event=l,this.payload=u||function(){return{}},this.receivedResp=null,this.timeout=d,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return A(p,[{key:"resend",value:function(a){this.timeout=a,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(a,l){return this.hasReceived(a)&&l(this.receivedResp.response),this.recHooks.push({status:a,callback:l}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(a){var l=a.status,u=a.response;a.ref,this.recHooks.filter(function(d){return d.status===l}).forEach(function(d){return d.callback(u)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var a=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(l){a.cancelRefEvent(),a.cancelTimeout(),a.receivedResp=l,a.matchReceive(l)}),this.timeoutTimer=setTimeout(function(){a.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(a){return this.receivedResp&&this.receivedResp.status===a}},{key:"trigger",value:function(a,l){this.channel.trigger(this.refEvent,{status:a,response:l})}}]),p}(),P=function(){function p(a,l,u){var d=this;c(this,p),this.state=V,this.topic=a,this.params=x(l||{}),this.socket=u,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new w(this,N,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Q(function(){d.socket.isConnected()&&d.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return d.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){d.rejoinTimer.reset(),d.isErrored()&&d.rejoin()})),this.joinPush.receive("ok",function(){d.state=v,d.rejoinTimer.reset(),d.pushBuffer.forEach(function(E){return E.send()}),d.pushBuffer=[]}),this.joinPush.receive("error",function(){d.state=Y,d.socket.isConnected()&&d.rejoinTimer.scheduleTimeout()}),this.onClose(function(){d.rejoinTimer.reset(),d.socket.hasLogger()&&d.socket.log("channel","close ".concat(d.topic," ").concat(d.joinRef())),d.state=V,d.socket.remove(d)}),this.onError(function(E){d.socket.hasLogger()&&d.socket.log("channel","error ".concat(d.topic),E),d.isJoining()&&d.joinPush.reset(),d.state=Y,d.socket.isConnected()&&d.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){d.socket.hasLogger()&&d.socket.log("channel","timeout ".concat(d.topic," (").concat(d.joinRef(),")"),d.joinPush.timeout),new w(d,ke,x({}),d.timeout).send(),d.state=Y,d.joinPush.reset(),d.socket.isConnected()&&d.rejoinTimer.scheduleTimeout()}),this.on(he,function(E,_){d.trigger(d.replyEventName(_),E)})}return A(p,[{key:"join",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=a,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(a){this.on(Z,a)}},{key:"onError",value:function(a){return this.on(Fe,function(l){return a(l)})}},{key:"on",value:function(a,l){var u=this.bindingRef++;return this.bindings.push({event:a,ref:u,callback:l}),u}},{key:"off",value:function(a,l){this.bindings=this.bindings.filter(function(u){return!(u.event===a&&(l===void 0||l===u.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(a,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.timeout;if(l=l||{},!this.joinedOnce)throw new Error("tried to push '".concat(a,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var d=new w(this,a,function(){return l},u);return this.canPush()?d.send():(d.startTimeout(),this.pushBuffer.push(d)),d}},{key:"leave",value:function(){var a=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=je;var u=function(){a.socket.hasLogger()&&a.socket.log("channel","leave ".concat(a.topic)),a.trigger(Z,"leave")},d=new w(this,ke,x({}),l);return d.receive("ok",function(){return u()}).receive("timeout",function(){return u()}),d.send(),this.canPush()||d.trigger("ok",{}),d}},{key:"onMessage",value:function(a,l,u){return l}},{key:"isLifecycleEvent",value:function(a){return Xe.indexOf(a)>=0}},{key:"isMember",value:function(a,l,u,d){return this.topic===a&&(!d||d===this.joinRef()||!this.isLifecycleEvent(l)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:a,event:l,payload:u,joinRef:d}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=O,this.joinPush.resend(a))}},{key:"trigger",value:function(a,l,u,d){var E=this.onMessage(a,l,u,d);if(l&&!E)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var _=this.bindings.filter(function(S){return S.event===a}),b=0;b<_.length;b++)_[b].callback(E,u,d||this.joinRef())}},{key:"replyEventName",value:function(a){return"chan_reply_".concat(a)}},{key:"isClosed",value:function(){return this.state===V}},{key:"isErrored",value:function(){return this.state===Y}},{key:"isJoined",value:function(){return this.state===v}},{key:"isJoining",value:function(){return this.state===O}},{key:"isLeaving",value:function(){return this.state===je}}]),p}(),R={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(p,a){if(p.payload.constructor===ArrayBuffer)return a(this.binaryEncode(p));var l=[p.join_ref,p.ref,p.topic,p.event,p.payload];return a(JSON.stringify(l))},decode:function(p,a){if(p.constructor===ArrayBuffer)return a(this.binaryDecode(p));var l=s(JSON.parse(p),5);return a({join_ref:l[0],ref:l[1],topic:l[2],event:l[3],payload:l[4]})},binaryEncode:function(p){var a=p.join_ref,l=p.ref,u=p.event,d=p.topic,E=p.payload,_=this.META_LENGTH+a.length+l.length+d.length+u.length,b=new ArrayBuffer(this.HEADER_LENGTH+_),S=new DataView(b),C=0;S.setUint8(C++,this.KINDS.push),S.setUint8(C++,a.length),S.setUint8(C++,l.length),S.setUint8(C++,d.length),S.setUint8(C++,u.length),Array.from(a,function(D){return S.setUint8(C++,D.charCodeAt(0))}),Array.from(l,function(D){return S.setUint8(C++,D.charCodeAt(0))}),Array.from(d,function(D){return S.setUint8(C++,D.charCodeAt(0))}),Array.from(u,function(D){return S.setUint8(C++,D.charCodeAt(0))});var I=new Uint8Array(b.byteLength+E.byteLength);return I.set(new Uint8Array(b),0),I.set(new Uint8Array(E),b.byteLength),I.buffer},binaryDecode:function(p){var a=new DataView(p),l=a.getUint8(0),u=new TextDecoder;switch(l){case this.KINDS.push:return this.decodePush(p,a,u);case this.KINDS.reply:return this.decodeReply(p,a,u);case this.KINDS.broadcast:return this.decodeBroadcast(p,a,u)}},decodePush:function(p,a,l){var u=a.getUint8(1),d=a.getUint8(2),E=a.getUint8(3),_=this.HEADER_LENGTH+this.META_LENGTH-1,b=l.decode(p.slice(_,_+u));_+=u;var S=l.decode(p.slice(_,_+d));_+=d;var C=l.decode(p.slice(_,_+E));return _+=E,{join_ref:b,ref:null,topic:S,event:C,payload:p.slice(_,p.byteLength)}},decodeReply:function(p,a,l){var u=a.getUint8(1),d=a.getUint8(2),E=a.getUint8(3),_=a.getUint8(4),b=this.HEADER_LENGTH+this.META_LENGTH,S=l.decode(p.slice(b,b+u));b+=u;var C=l.decode(p.slice(b,b+d));b+=d;var I=l.decode(p.slice(b,b+E));b+=E;var D=l.decode(p.slice(b,b+_));b+=_;var oe=p.slice(b,p.byteLength);return{join_ref:S,ref:C,topic:I,event:he,payload:{status:D,response:oe}}},decodeBroadcast:function(p,a,l){var u=a.getUint8(1),d=a.getUint8(2),E=this.HEADER_LENGTH+2,_=l.decode(p.slice(E,E+u));E+=u;var b=l.decode(p.slice(E,E+d));return E+=d,{join_ref:null,ref:null,topic:_,event:b,payload:p.slice(E,p.byteLength)}}},J=function(){function p(a){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c(this,p),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=u.timeout||1e4,this.transport=u.transport||T.WebSocket||W,this.defaultEncoder=R.encode.bind(R),this.defaultDecoder=R.decode.bind(R),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=u.binaryType||"arraybuffer",this.transport!==W?(this.encode=u.encode||this.defaultEncoder,this.decode=u.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),y&&y.addEventListener&&y.addEventListener("beforeunload",function(d){l.conn&&(l.unloaded=!0,l.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=u.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(d){return u.rejoinAfterMs?u.rejoinAfterMs(d):[1e3,2e3,5e3][d-1]||1e4},this.reconnectAfterMs=function(d){return l.unloaded?100:u.reconnectAfterMs?u.reconnectAfterMs(d):[10,50,100,150,200,250,500,1e3,2e3][d-1]||5e3},this.logger=u.logger||null,this.longpollerTimeout=u.longpollerTimeout||2e4,this.params=x(u.params||{}),this.endPoint="".concat(a,"/").concat(Ce),this.vsn=u.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Q(function(){l.teardown(function(){return l.connect()})},this.reconnectAfterMs)}return A(p,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var a=F.appendParams(F.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return a.charAt(0)!=="/"?a:a.charAt(1)==="/"?"".concat(this.protocol(),":").concat(a):"".concat(this.protocol(),"://").concat(location.host).concat(a)}},{key:"disconnect",value:function(a,l,u){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(a,l,u)}},{key:"connect",value:function(a){var l=this;a&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=x(a)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return l.onConnOpen()},this.conn.onerror=function(u){return l.onConnError(u)},this.conn.onmessage=function(u){return l.onConnMessage(u)},this.conn.onclose=function(u){return l.onConnClose(u)})}},{key:"log",value:function(a,l,u){this.logger(a,l,u)}},{key:"hasLogger",value:function(){return this.logger!==null}},{key:"onOpen",value:function(a){var l=this.makeRef();return this.stateChangeCallbacks.open.push([l,a]),l}},{key:"onClose",value:function(a){var l=this.makeRef();return this.stateChangeCallbacks.close.push([l,a]),l}},{key:"onError",value:function(a){var l=this.makeRef();return this.stateChangeCallbacks.error.push([l,a]),l}},{key:"onMessage",value:function(a){var l=this.makeRef();return this.stateChangeCallbacks.message.push([l,a]),l}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(a){return(0,s(a,2)[1])()})}},{key:"resetHeartbeat",value:function(){var a=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return a.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(a,l,u){var d=this;if(!this.conn)return a&&a();this.waitForBufferDone(function(){d.conn&&(l?d.conn.close(l,u||""):d.conn.close()),d.waitForSocketClosed(function(){d.conn&&(d.conn.onclose=function(){},d.conn=null),a&&a()})})}},{key:"waitForBufferDone",value:function(a){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u!==5&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){l.waitForBufferDone(a,u+1)},150*u):a()}},{key:"waitForSocketClosed",value:function(a){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u!==5&&this.conn&&this.conn.readyState!==M?setTimeout(function(){l.waitForSocketClosed(a,u+1)},150*u):a()}},{key:"onConnClose",value:function(a){this.hasLogger()&&this.log("transport","close",a),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(l){return(0,s(l,2)[1])(a)})}},{key:"onConnError",value:function(a){this.hasLogger()&&this.log("transport",a),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(l){return(0,s(l,2)[1])(a)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(a){a.isErrored()||a.isLeaving()||a.isClosed()||a.trigger(Fe)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case L:return"connecting";case k:return"open";case K:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return this.connectionState()==="open"}},{key:"remove",value:function(a){this.off(a.stateChangeRefs),this.channels=this.channels.filter(function(l){return l.joinRef()!==a.joinRef()})}},{key:"off",value:function(a){for(var l in this.stateChangeCallbacks)this.stateChangeCallbacks[l]=this.stateChangeCallbacks[l].filter(function(u){var d=s(u,1)[0];return a.indexOf(d)===-1})}},{key:"channel",value:function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=new P(a,l,this);return this.channels.push(u),u}},{key:"push",value:function(a){var l=this;if(this.hasLogger()){var u=a.topic,d=a.event,E=a.payload,_=a.ref,b=a.join_ref;this.log("push","".concat(u," ").concat(d," (").concat(b,", ").concat(_,")"),E)}this.isConnected()?this.encode(a,function(S){return l.conn.send(S)}):this.sendBuffer.push(function(){return l.encode(a,function(S){return l.conn.send(S)})})}},{key:"makeRef",value:function(){var a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(a){this.closeWasClean=!1,this.conn.readyState===k&&this.conn.close(1e3,a)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(a){return a()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(a){var l=this;this.decode(a.data,function(u){var d=u.topic,E=u.event,_=u.payload,b=u.ref,S=u.join_ref;b&&b===l.pendingHeartbeatRef&&(l.pendingHeartbeatRef=null),l.hasLogger()&&l.log("receive","".concat(_.status||""," ").concat(d," ").concat(E," ").concat(b&&"("+b+")"||""),_);for(var C=0;C<l.channels.length;C++){var I=l.channels[C];I.isMember(d,E,_,S)&&I.trigger(E,_,b,S)}for(var D=0;D<l.stateChangeCallbacks.message.length;D++)(0,s(l.stateChangeCallbacks.message[D],2)[1])(u)})}},{key:"leaveOpenTopic",value:function(a){var l=this.channels.find(function(u){return u.topic===a&&(u.isJoined()||u.isJoining())});l&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(a,'"')),l.leave())}}]),p}(),W=function(){function p(a){c(this,p),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(a),this.readyState=L,this.poll()}return A(p,[{key:"normalizeEndpoint",value:function(a){return a.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Ce),"$1/"+xt)}},{key:"endpointURL",value:function(){return F.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=L}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var a=this;this.readyState!==k&&this.readyState!==L||F.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(l){if(l){var u=l.status,d=l.token,E=l.messages;a.token=d}else u=0;switch(u){case 200:E.forEach(function(_){return a.onmessage({data:_})}),a.poll();break;case 204:a.poll();break;case 410:a.readyState=k,a.onopen(),a.poll();break;case 403:a.onerror(),a.close();break;case 0:case 500:a.onerror(),a.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(u))}})}},{key:"send",value:function(a){var l=this;F.request("POST",this.endpointURL(),"application/json",a,this.timeout,this.onerror.bind(this,"timeout"),function(u){u&&u.status===200||(l.onerror(u&&u.status),l.closeAndRetry())})}},{key:"close",value:function(a,l){this.readyState=M,this.onclose()}}]),p}(),F=function(){function p(){c(this,p)}return A(p,null,[{key:"request",value:function(a,l,u,d,E,_,b){if(T.XDomainRequest){var S=new XDomainRequest;this.xdomainRequest(S,a,l,d,E,_,b)}else{var C=new T.XMLHttpRequest;this.xhrRequest(C,a,l,u,d,E,_,b)}}},{key:"xdomainRequest",value:function(a,l,u,d,E,_,b){var S=this;a.timeout=E,a.open(l,u),a.onload=function(){var C=S.parseJSON(a.responseText);b&&b(C)},_&&(a.ontimeout=_),a.onprogress=function(){},a.send(d)}},{key:"xhrRequest",value:function(a,l,u,d,E,_,b,S){var C=this;a.open(l,u,!0),a.timeout=_,a.setRequestHeader("Content-Type",d),a.onerror=function(){S&&S(null)},a.onreadystatechange=function(){if(a.readyState===C.states.complete&&S){var I=C.parseJSON(a.responseText);S(I)}},b&&(a.ontimeout=b),a.send(E)}},{key:"parseJSON",value:function(a){if(!a||a==="")return null;try{return JSON.parse(a)}catch(l){return console&&console.log("failed to parse JSON response",a),null}}},{key:"serialize",value:function(a,l){var u=[];for(var d in a)if(a.hasOwnProperty(d)){var E=l?"".concat(l,"[").concat(d,"]"):d,_=a[d];n(_)==="object"?u.push(this.serialize(_,E)):u.push(encodeURIComponent(E)+"="+encodeURIComponent(_))}return u.join("&")}},{key:"appendParams",value:function(a,l){if(Object.keys(l).length===0)return a;var u=a.match(/\?/)?"&":"?";return"".concat(a).concat(u).concat(this.serialize(l))}}]),p}();F.states={complete:4};var Pe=function(){function p(a){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c(this,p);var d=u.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=a,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(d.state,function(E){var _=l.caller,b=_.onJoin,S=_.onLeave,C=_.onSync;l.joinRef=l.channel.joinRef(),l.state=p.syncState(l.state,E,b,S),l.pendingDiffs.forEach(function(I){l.state=p.syncDiff(l.state,I,b,S)}),l.pendingDiffs=[],C()}),this.channel.on(d.diff,function(E){var _=l.caller,b=_.onJoin,S=_.onLeave,C=_.onSync;l.inPendingSyncState()?l.pendingDiffs.push(E):(l.state=p.syncDiff(l.state,E,b,S),C())})}return A(p,[{key:"onJoin",value:function(a){this.caller.onJoin=a}},{key:"onLeave",value:function(a){this.caller.onLeave=a}},{key:"onSync",value:function(a){this.caller.onSync=a}},{key:"list",value:function(a){return p.list(this.state,a)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(a,l,u,d){var E=this,_=this.clone(a),b={},S={};return this.map(_,function(C,I){l[C]||(S[C]=I)}),this.map(l,function(C,I){var D=_[C];if(D){var oe=I.metas.map(function(me){return me.phx_ref}),Rt=D.metas.map(function(me){return me.phx_ref}),we=I.metas.filter(function(me){return Rt.indexOf(me.phx_ref)<0}),ri=D.metas.filter(function(me){return oe.indexOf(me.phx_ref)<0});we.length>0&&(b[C]=I,b[C].metas=we),ri.length>0&&(S[C]=E.clone(D),S[C].metas=ri)}else b[C]=I}),this.syncDiff(_,{joins:b,leaves:S},u,d)}},{key:"syncDiff",value:function(a,l,u,d){var E=l.joins,_=l.leaves,b=this.clone(a);return u||(u=function(){}),d||(d=function(){}),this.map(E,function(S,C){var I=b[S];if(b[S]=C,I){var D,oe=b[S].metas.map(function(we){return we.phx_ref}),Rt=I.metas.filter(function(we){return oe.indexOf(we.phx_ref)<0});(D=b[S].metas).unshift.apply(D,i(Rt))}u(S,I,C)}),this.map(_,function(S,C){var I=b[S];if(I){var D=C.metas.map(function(oe){return oe.phx_ref});I.metas=I.metas.filter(function(oe){return D.indexOf(oe.phx_ref)<0}),d(S,I,C),I.metas.length===0&&delete b[S]}}),b}},{key:"list",value:function(a,l){return l||(l=function(u,d){return d}),this.map(a,function(u,d){return l(u,d)})}},{key:"map",value:function(a,l){return Object.getOwnPropertyNames(a).map(function(u){return l(u,a[u])})}},{key:"clone",value:function(a){return JSON.parse(JSON.stringify(a))}}]),p}(),Q=function(){function p(a,l){c(this,p),this.callback=a,this.timerCalc=l,this.timer=null,this.tries=0}return A(p,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var a=this;clearTimeout(this.timer),this.timer=setTimeout(function(){a.tries=a.tries+1,a.callback()},this.timerCalc(this.tries+1))}}]),p}()}])})});var Fn={};vn(Fn,{LiveElement:()=>cn,LiveSocket:()=>De});var at="consecutive-reloads",Lt=10,ci=[1e3,3e3],ui=3e4,lt=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],j="data-phx-component",ht="data-phx-link",di="track-static",fi="data-phx-link-state",z="data-phx-ref",ct="track-uploads",ee="data-phx-upload-ref",xe="data-phx-preflighted-refs",pi="data-phx-done-refs",It="drop-target",Ve="data-phx-active-refs",Je="phx:live-file:updated",Ke="data-phx-skip",Ot="data-phx-prune",Dt="page-loading",Ht="phx-connected",We="phx-loading",$t="phx-no-feedback",Nt="phx-error",ce="data-phx-parent-id",ut="data-phx-main",ae="data-phx-root-id",gi="trigger-action",dt="feedback-for",ft="phx-has-focused",mi=["text","textarea","number","email","password","search","tel","url","date","time"],pt=["checkbox","radio"],gt="phx-has-submitted",G="data-phx-session",re=`[${G}]`,ue="data-phx-static",mt="data-phx-readonly",ze="data-phx-disabled",Ge="disable-with",qe="data-phx-disable-with-restore",Ye="hook",vi="debounce",yi="throttle",Ze="update",bi="key",te="phxPrivate",Ut="auto-recover",vt="phx:live-socket:debug",yt="phx:live-socket:profiling",bt="phx:live-socket:latency-sim",_i="progress",Ai=1,Ei=200,Si="phx-",ki=3e4;var Re="debounce-trigger",Qe="throttled",Mt="debounce-prev-key",Ci={debounce:300,throttle:300},jt="d",ie="s",X="c",Ft="e",Xt="r",Bt="t",Pi="p";var _t=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){clearTimeout(this.chunkTimer),this.uploadChannel.leave(),this.entry.error(e)}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return $("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))})}};var $=(r,e)=>console.error&&console.error(r,e),ve=r=>typeof r=="number";function wi(){let r=new Set,e=document.querySelectorAll("*[id]");for(let t=0,i=e.length;t<i;t++)r.has(e[t].id)?console.error(`Multiple IDs detected: ${e[t].id}. Ensure unique element ids.`):r.add(e[t].id)}var Ti=(r,e,t,i)=>{r.liveSocket.isDebugEnabled()&&console.log(`${r.id} ${e}: ${t} - `,i)},At=r=>typeof r=="function"?r:function(){return r},Le=r=>JSON.parse(JSON.stringify(r)),ye=(r,e,t)=>{do{if(r.matches(`[${e}]`))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1&&!(t&&t.isSameNode(r)||r.matches(re)));return null},Ie=r=>r!==null&&typeof r=="object"&&!(r instanceof Array),xi=(r,e)=>JSON.stringify(r)===JSON.stringify(e),Vt=r=>{for(let e in r)return!1;return!0},q=(r,e)=>r&&e(r),Ri=function(r,e,t,i){r.forEach(n=>{new _t(n,t.config.chunk_size,i).upload()})};var Li={canPushState(){return typeof history.pushState!="undefined"},dropLocal(r,e,t){return r.removeItem(this.localKey(e,t))},updateLocal(r,e,t,i,n){let s=this.getLocal(r,e,t),o=this.localKey(e,t),h=s===null?i:n(s);return r.setItem(o,JSON.stringify(h)),h},getLocal(r,e,t){return JSON.parse(r.getItem(this.localKey(e,t)))},updateCurrentState(r){!this.canPushState()||history.replaceState(r(history.state||{}),"",window.location.href)},pushState(r,e,t){if(this.canPushState()){if(t!==window.location.href){if(e.type=="redirect"&&e.scroll){let n=history.state||{};n.scroll=e.scroll,history.replaceState(n,"",window.location.href)}delete e.scroll,history[r+"State"](e,"",t||null);let i=this.getHashTargetEl(window.location.hash);i?i.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)}}else this.redirect(t)},setCookie(r,e){document.cookie=`${r}=${e}`},getCookie(r){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${r}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(r,e){e&&Li.setCookie("__phoenix_flash__",e+"; max-age=60000; path=/"),window.location=r},localKey(r,e){return`${r}-${e}`},getHashTargetEl(r){let e=r.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},se=Li;var ne={byId(r){return document.getElementById(r)||$(`no id found for ${r}`)},removeClass(r,e){r.classList.remove(e),r.classList.length===0&&r.removeAttribute("class")},all(r,e,t){if(!r)return[];let i=Array.from(r.querySelectorAll(e));return t?i.forEach(t):i},childNodeLength(r){let e=document.createElement("template");return e.innerHTML=r,e.content.childElementCount},isUploadInput(r){return r.type==="file"&&r.getAttribute(ee)!==null},findUploadInputs(r){return this.all(r,`input[type="file"][${ee}]`)},findComponentNodeList(r,e){return this.filterWithinSameLiveView(this.all(r,`[${j}="${e}"]`),r)},isPhxDestroyed(r){return!!(r.id&&ne.private(r,"destroyed"))},markPhxChildDestroyed(r){this.isPhxChild(r)&&r.setAttribute(G,""),this.putPrivate(r,"destroyed",!0)},findPhxChildrenInFragment(r,e){let t=document.createElement("template");return t.innerHTML=r,this.findPhxChildren(t.content,e)},isIgnored(r,e){return(r.getAttribute(e)||r.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(r,e,t){return r.getAttribute&&t.indexOf(r.getAttribute(e))>=0},findPhxChildren(r,e){return this.all(r,`${re}[${ce}="${e}"]`)},findParentCIDs(r,e){let t=new Set(e);return e.reduce((i,n)=>{let s=`[${j}="${n}"] [${j}]`;return this.filterWithinSameLiveView(this.all(r,s),r).map(o=>parseInt(o.getAttribute(j))).forEach(o=>i.delete(o)),i},t)},filterWithinSameLiveView(r,e){return e.querySelector(re)?r.filter(t=>this.withinSameLiveView(t,e)):r},withinSameLiveView(r,e){for(;r=r.parentNode;){if(r.isSameNode(e))return!0;if(r.getAttribute(G)!==null)return!1}},private(r,e){return r[te]&&r[te][e]},deletePrivate(r,e){r[te]&&delete r[te][e]},putPrivate(r,e,t){r[te]||(r[te]={}),r[te][e]=t},updatePrivate(r,e,t,i){let n=this.private(r,e);n===void 0?this.putPrivate(r,e,i(t)):this.putPrivate(r,e,i(n))},copyPrivates(r,e){e[te]&&(r[te]=e[te])},putTitle(r){let e=document.querySelector("title"),{prefix:t,suffix:i}=e.dataset;document.title=`${t||""}${r}${i||""}`},debounce(r,e,t,i,n,s,o){let h=r.getAttribute(t),c=r.getAttribute(n);h===""&&(h=i),c===""&&(c=s);let f=h||c;switch(f){case null:return o();case"blur":this.once(r,"debounce-blur")&&r.addEventListener("blur",()=>o());return;default:let A=parseInt(f),m=()=>c?this.deletePrivate(r,Qe):o(),y=this.incCycle(r,Re,m);if(isNaN(A))return $(`invalid throttle/debounce value: ${f}`);if(c){let L=!1;if(e.type==="keydown"){let k=this.private(r,Mt);this.putPrivate(r,Mt,e.key),L=k!==e.key}if(!L&&this.private(r,Qe))return!1;o(),this.putPrivate(r,Qe,!0),setTimeout(()=>this.triggerCycle(r,Re),A)}else setTimeout(()=>this.triggerCycle(r,Re,y),A);let T=r.form;T&&this.once(T,"bind-debounce")&&T.addEventListener("submit",()=>{Array.from(new FormData(T).entries(),([L])=>{let k=T.querySelector(`[name="${L}"]`);this.incCycle(k,Re),this.deletePrivate(k,Qe)})}),this.once(r,"bind-debounce")&&r.addEventListener("blur",()=>this.triggerCycle(r,Re))}},triggerCycle(r,e,t){let[i,n]=this.private(r,e);t||(t=i),t===i&&(this.incCycle(r,e),n())},once(r,e){return this.private(r,e)===!0?!1:(this.putPrivate(r,e,!0),!0)},incCycle(r,e,t=function(){}){let[i]=this.private(r,e)||[0,t];return i++,this.putPrivate(r,e,[i,t]),i},discardError(r,e,t){let i=e.getAttribute&&e.getAttribute(t),n=i&&r.querySelector(`[id="${i}"], [name="${i}"]`);!n||this.private(n,ft)||this.private(n.form,gt)||e.classList.add($t)},showError(r,e){(r.id||r.name)&&this.all(r.form,`[${e}="${r.id}"], [${e}="${r.name}"]`,t=>{this.removeClass(t,$t)})},isPhxChild(r){return r.getAttribute&&r.getAttribute(ce)},dispatchEvent(r,e,t={}){let i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});r.dispatchEvent(i)},cloneNode(r,e){if(typeof e=="undefined")return r.cloneNode(!0);{let t=r.cloneNode(!1);return t.innerHTML=e,t}},mergeAttrs(r,e,t={}){let i=t.exclude||[],n=t.isIgnored,s=e.attributes;for(let h=s.length-1;h>=0;h--){let c=s[h].name;i.indexOf(c)<0&&r.setAttribute(c,e.getAttribute(c))}let o=r.attributes;for(let h=o.length-1;h>=0;h--){let c=o[h].name;n?c.startsWith("data-")&&!e.hasAttribute(c)&&r.removeAttribute(c):e.hasAttribute(c)||r.removeAttribute(c)}},mergeFocusedInput(r,e){r instanceof HTMLSelectElement||ne.mergeAttrs(r,e,{except:["value"]}),e.readOnly?r.setAttribute("readonly",!0):r.removeAttribute("readonly")},hasSelectionRange(r){return r.setSelectionRange&&(r.type==="text"||r.type==="textarea")},restoreFocus(r,e,t){if(!ne.isTextualInput(r))return;let i=r.matches(":focus");r.readOnly&&r.blur(),i||r.focus(),this.hasSelectionRange(r)&&r.setSelectionRange(e,t)},isFormInput(r){return/^(?:input|select|textarea)$/i.test(r.tagName)&&r.type!=="button"},syncAttrsToProps(r){r instanceof HTMLInputElement&&pt.indexOf(r.type.toLocaleLowerCase())>=0&&(r.checked=r.getAttribute("checked")!==null)},isTextualInput(r){return mi.indexOf(r.type)>=0},isNowTriggerFormExternal(r,e){return r.getAttribute&&r.getAttribute(e)!==null},syncPendingRef(r,e,t){let i=r.getAttribute(z);return i===null?!0:ne.isFormInput(r)||r.getAttribute(t)!==null?(ne.isUploadInput(r)&&ne.mergeAttrs(r,e,{isIgnored:!0}),ne.putPrivate(r,z,e),!1):(lt.forEach(n=>{r.classList.contains(n)&&e.classList.add(n)}),e.setAttribute(z,i),!0)},cleanChildNodes(r,e){if(ne.isPhxUpdate(r,e,["append","prepend"])){let t=[];r.childNodes.forEach(i=>{i.id||(i.nodeType===Node.TEXT_NODE&&i.nodeValue.trim()===""||$(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(i.outerHTML||i.nodeValue).trim()}"

`),t.push(i))}),t.forEach(i=>i.remove())}},replaceRootContainer(r,e,t){let i=new Set(["id",G,ue,ut,ae]);if(r.tagName.toLowerCase()===e.toLowerCase())return Array.from(r.attributes).filter(n=>!i.has(n.name.toLowerCase())).forEach(n=>r.removeAttribute(n.name)),Object.keys(t).filter(n=>!i.has(n.toLowerCase())).forEach(n=>r.setAttribute(n,t[n])),r;{let n=document.createElement(e);return Object.keys(t).forEach(s=>n.setAttribute(s,t[s])),i.forEach(s=>n.setAttribute(s,r.getAttribute(s))),n.innerHTML=r.innerHTML,r.replaceWith(n),n}},getSticky(r,e,t){let i=(ne.private(r,"sticky")||[]).find(([n])=>e===n);if(i){let[n,s,o]=i;return o}else return typeof t=="function"?t():t},deleteSticky(r,e){this.updatePrivate(r,"sticky",[],t=>t.filter(([i,n])=>i!==e))},putSticky(r,e,t){let i=t(r);this.updatePrivate(r,"sticky",[],n=>{let s=n.findIndex(([o])=>e===o);return s>=0?n[s]=[e,t,i]:n.push([e,t,i]),n})},applyStickyOperations(r){let e=ne.private(r,"sticky");!e||e.forEach(([t,i,n])=>this.putSticky(r,t,i))}},g=ne;var Oe=class{static isActive(e,t){let i=t._phxRef===void 0,s=e.getAttribute(Ve).split(",").indexOf(H.genFileRef(t))>=0;return t.size>0&&(i||s)}static isPreflighted(e,t){return e.getAttribute(xe).split(",").indexOf(H.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,i){this.ref=H.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(Je,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{H.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),H.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(Je,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(Ve).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||$(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:Ri}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||$(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}};var _n=0,H=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(_n++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let n=this.activeFiles(e).find(s=>this.genFileRef(s)===t);i(URL.createObjectURL(n))}static hasUploadsInProgress(e){let t=0;return g.findUploadInputs(e).forEach(i=>{i.getAttribute(xe)!==i.getAttribute(pi)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(n=>{let s={path:e.name},o=e.getAttribute(ee);i[o]=i[o]||[],s.ref=this.genFileRef(n),s.name=n.name||s.ref,s.type=n.type,s.size=n.size,i[o].push(s)}),i}static clearFiles(e){e.value=null,e.removeAttribute(ee),g.putPrivate(e,"files",[])}static untrackFile(e,t){g.putPrivate(e,"files",g.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t){if(e.getAttribute("multiple")!==null){let i=t.filter(n=>!this.activeFiles(e).find(s=>Object.is(s,n)));g.putPrivate(e,"files",this.activeFiles(e).concat(i)),e.value=null}else g.putPrivate(e,"files",t)}static activeFileInputs(e){let t=g.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(g.private(e,"files")||[]).filter(t=>Oe.isActive(e,t))}static inputsAwaitingPreflight(e){let t=g.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!Oe.isPreflighted(e,t))}constructor(e,t,i){this.view=t,this.onComplete=i,this._entries=Array.from(H.filesAwaitingPreflight(e)||[]).map(n=>new Oe(e,n,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(s=>(s.zipPostFlight(e),s.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),s));let n=this._entries.reduce((s,o)=>{let{name:h,callback:c}=o.uploader(i.uploaders);return s[h]=s[h]||{callback:c,entries:[]},s[h].entries.push(o),s},{});for(let s in n){let{callback:o,entries:h}=n[s];o(h,t,e,i)}}};var An={LiveFileUpload:{activeRefs(){return this.el.getAttribute(Ve)},preflightedRefs(){return this.el.getAttribute(xe)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let r=this.preflightedRefs();this.preflightedWas!==r&&(this.preflightedWas=r,r===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(Je))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(ee)),H.getEntryDataURL(this.inputEl,this.ref,r=>{this.url=r,this.el.src=r})},destroyed(){URL.revokeObjectURL(this.url)}}},Ii=An;var Et=class{constructor(e,t,i){let n=new Set,s=new Set([...t.children].map(h=>h.id)),o=[];Array.from(e.children).forEach(h=>{if(h.id&&(n.add(h.id),s.has(h.id))){let c=h.previousElementSibling&&h.previousElementSibling.id;o.push({elementId:h.id,previousElementId:c})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=o,this.elementIdsToAdd=[...s].filter(h=>!n.has(h))}perform(){let e=g.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?q(document.getElementById(t.previousElementId),i=>{q(document.getElementById(t.elementId),n=>{n.previousElementSibling&&n.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",n)})}):q(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{q(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}};var Oi=11;function En(r,e){var t=e.attributes,i,n,s,o,h;if(!(e.nodeType===Oi||r.nodeType===Oi)){for(var c=t.length-1;c>=0;c--)i=t[c],n=i.name,s=i.namespaceURI,o=i.value,s?(n=i.localName||n,h=r.getAttributeNS(s,n),h!==o&&(i.prefix==="xmlns"&&(n=i.name),r.setAttributeNS(s,n,o))):(h=r.getAttribute(n),h!==o&&r.setAttribute(n,o));for(var f=r.attributes,A=f.length-1;A>=0;A--)i=f[A],n=i.name,s=i.namespaceURI,s?(n=i.localName||n,e.hasAttributeNS(s,n)||r.removeAttributeNS(s,n)):e.hasAttribute(n)||r.removeAttribute(n)}}var St,Sn="http://www.w3.org/1999/xhtml",B=typeof document=="undefined"?void 0:document,kn=!!B&&"content"in B.createElement("template"),Cn=!!B&&B.createRange&&"createContextualFragment"in B.createRange();function Pn(r){var e=B.createElement("template");return e.innerHTML=r,e.content.childNodes[0]}function wn(r){St||(St=B.createRange(),St.selectNode(B.body));var e=St.createContextualFragment(r);return e.childNodes[0]}function Tn(r){var e=B.createElement("body");return e.innerHTML=r,e.childNodes[0]}function xn(r){return r=r.trim(),kn?Pn(r):Cn?wn(r):Tn(r)}function kt(r,e){var t=r.nodeName,i=e.nodeName,n,s;return t===i?!0:(n=t.charCodeAt(0),s=i.charCodeAt(0),n<=90&&s>=97?t===i.toUpperCase():s<=90&&n>=97?i===t.toUpperCase():!1)}function Rn(r,e){return!e||e===Sn?B.createElement(r):B.createElementNS(e,r)}function Ln(r,e){for(var t=r.firstChild;t;){var i=t.nextSibling;e.appendChild(t),t=i}return e}function Jt(r,e,t){r[t]!==e[t]&&(r[t]=e[t],r[t]?r.setAttribute(t,""):r.removeAttribute(t))}var Di={OPTION:function(r,e){var t=r.parentNode;if(t){var i=t.nodeName.toUpperCase();i==="OPTGROUP"&&(t=t.parentNode,i=t&&t.nodeName.toUpperCase()),i==="SELECT"&&!t.hasAttribute("multiple")&&(r.hasAttribute("selected")&&!e.selected&&(r.setAttribute("selected","selected"),r.removeAttribute("selected")),t.selectedIndex=-1)}Jt(r,e,"selected")},INPUT:function(r,e){Jt(r,e,"checked"),Jt(r,e,"disabled"),r.value!==e.value&&(r.value=e.value),e.hasAttribute("value")||r.removeAttribute("value")},TEXTAREA:function(r,e){var t=e.value;r.value!==t&&(r.value=t);var i=r.firstChild;if(i){var n=i.nodeValue;if(n==t||!t&&n==r.placeholder)return;i.nodeValue=t}},SELECT:function(r,e){if(!e.hasAttribute("multiple")){for(var t=-1,i=0,n=r.firstChild,s,o;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")s=n,n=s.firstChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){t=i;break}i++}n=n.nextSibling,!n&&s&&(n=s.nextSibling,s=null)}r.selectedIndex=t}}},et=1,In=11,Hi=3,$i=8;function be(){}function On(r){if(r)return r.getAttribute&&r.getAttribute("id")||r.id}function Dn(r){return function(t,i,n){if(n||(n={}),typeof i=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var s=i;i=B.createElement("html"),i.innerHTML=s}else i=xn(i);var o=n.getNodeKey||On,h=n.onBeforeNodeAdded||be,c=n.onNodeAdded||be,f=n.onBeforeElUpdated||be,A=n.onElUpdated||be,m=n.onBeforeNodeDiscarded||be,y=n.onNodeDiscarded||be,T=n.onBeforeElChildrenUpdated||be,L=n.childrenOnly===!0,k=Object.create(null),K=[];function M(x){K.push(x)}function V(x,w){if(x.nodeType===et)for(var P=x.firstChild;P;){var R=void 0;w&&(R=o(P))?M(R):(y(P),P.firstChild&&V(P,w)),P=P.nextSibling}}function Y(x,w,P){m(x)!==!1&&(w&&w.removeChild(x),y(x),V(x,P))}function v(x){if(x.nodeType===et||x.nodeType===In)for(var w=x.firstChild;w;){var P=o(w);P&&(k[P]=w),v(w),w=w.nextSibling}}v(t);function O(x){c(x);for(var w=x.firstChild;w;){var P=w.nextSibling,R=o(w);if(R){var J=k[R];J&&kt(w,J)?(w.parentNode.replaceChild(J,w),Z(J,w)):O(w)}else O(w);w=P}}function je(x,w,P){for(;w;){var R=w.nextSibling;(P=o(w))?M(P):Y(w,x,!0),w=R}}function Z(x,w,P){var R=o(w);R&&delete k[R],!(!P&&(f(x,w)===!1||(r(x,w),A(x),T(x,w)===!1)))&&(x.nodeName!=="TEXTAREA"?Fe(x,w):Di.TEXTAREA(x,w))}function Fe(x,w){var P=w.firstChild,R=x.firstChild,J,W,F,Pe,Q;e:for(;P;){for(Pe=P.nextSibling,J=o(P);R;){if(F=R.nextSibling,P.isSameNode&&P.isSameNode(R)){P=Pe,R=F;continue e}W=o(R);var p=R.nodeType,a=void 0;if(p===P.nodeType&&(p===et?(J?J!==W&&((Q=k[J])?F===Q?a=!1:(x.insertBefore(Q,R),W?M(W):Y(R,x,!0),R=Q):a=!1):W&&(a=!1),a=a!==!1&&kt(R,P),a&&Z(R,P)):(p===Hi||p==$i)&&(a=!0,R.nodeValue!==P.nodeValue&&(R.nodeValue=P.nodeValue))),a){P=Pe,R=F;continue e}W?M(W):Y(R,x,!0),R=F}if(J&&(Q=k[J])&&kt(Q,P))x.appendChild(Q),Z(Q,P);else{var l=h(P);l!==!1&&(l&&(P=l),P.actualize&&(P=P.actualize(x.ownerDocument||B)),x.appendChild(P),O(P))}P=Pe,R=F}je(x,R,W);var u=Di[x.nodeName];u&&u(x,w)}var N=t,he=N.nodeType,ke=i.nodeType;if(!L){if(he===et)ke===et?kt(t,i)||(y(t),N=Ln(t,Rn(i.nodeName,i.namespaceURI))):N=i;else if(he===Hi||he===$i){if(ke===he)return N.nodeValue!==i.nodeValue&&(N.nodeValue=i.nodeValue),N;N=i}}if(N===i)y(t);else{if(i.isSameNode&&i.isSameNode(N))return;if(Z(N,i,L),K)for(var Xe=0,xt=K.length;Xe<xt;Xe++){var Ce=k[K[Xe]];Ce&&Y(Ce,Ce.parentNode,!1)}}return!L&&N!==t&&t.parentNode&&(N.actualize&&(N=N.actualize(t.ownerDocument||B)),t.parentNode.replaceChild(N,t)),N}}var Hn=Dn(En),Kt=Hn;var _e=class{static patchEl(e,t,i){Kt(e,t,{childrenOnly:!1,onBeforeElUpdated:(n,s)=>{if(i&&i.isSameNode(n)&&g.isFormInput(n))return g.mergeFocusedInput(n,s),!1}})}constructor(e,t,i,n,s){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=n,this.targetCID=s,this.cidPatch=ve(this.targetCID),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){g.all(this.container,"[phx-update=append] > *, [phx-update=prepend] > *",e=>{e.setAttribute(Ot,"")})}perform(){let{view:e,liveSocket:t,container:i,html:n}=this,s=this.isCIDPatch()?this.targetCIDContainer(n):i;if(this.isCIDPatch()&&!s)return;let o=t.getActiveElement(),{selectionStart:h,selectionEnd:c}=o&&g.hasSelectionRange(o)?o:{},f=t.binding(Ze),A=t.binding(dt),m=t.binding(Ge),y=t.binding(gi),T=t.binding("remove"),L=[],k=[],K=[],M=[],V=null,Y=t.time("premorph container prep",()=>this.buildDiffHTML(i,n,f,s));return this.trackBefore("added",i),this.trackBefore("updated",i,i),t.time("morphdom",()=>{Kt(s,Y,{childrenOnly:s.getAttribute(j)===null,getNodeKey:v=>g.isPhxDestroyed(v)?null:v.id,onBeforeNodeAdded:v=>(this.trackBefore("added",v),v),onNodeAdded:v=>{v instanceof HTMLImageElement&&v.srcset?v.srcset=v.srcset:v instanceof HTMLVideoElement&&v.autoplay&&v.play(),g.isNowTriggerFormExternal(v,y)&&(V=v),g.discardError(s,v,A),g.isPhxChild(v)&&e.ownsElement(v)&&this.trackAfter("phxChildAdded",v),L.push(v)},onNodeDiscarded:v=>{g.isPhxChild(v)&&t.destroyViewByEl(v),this.trackAfter("discarded",v)},onBeforeNodeDiscarded:v=>v.getAttribute&&v.getAttribute(Ot)!==null?!0:v.parentNode!==null&&g.isPhxUpdate(v.parentNode,f,["append","prepend"])&&v.id?!1:v.getAttribute&&v.getAttribute(T)?(M.push(v),!1):!this.skipCIDSibling(v),onElUpdated:v=>{g.isNowTriggerFormExternal(v,y)&&(V=v),k.push(v)},onBeforeElUpdated:(v,O)=>{if(g.cleanChildNodes(O,f),this.skipCIDSibling(O))return!1;if(g.isIgnored(v,f))return this.trackBefore("updated",v,O),g.mergeAttrs(v,O,{isIgnored:!0}),k.push(v),g.applyStickyOperations(v),!1;if(v.type==="number"&&v.validity&&v.validity.badInput)return!1;if(!g.syncPendingRef(v,O,m))return g.isUploadInput(v)&&(this.trackBefore("updated",v,O),k.push(v)),g.applyStickyOperations(v),!1;if(g.isPhxChild(O)){let Z=v.getAttribute(G);return g.mergeAttrs(v,O,{exclude:[ue]}),Z!==""&&v.setAttribute(G,Z),v.setAttribute(ae,this.rootID),g.applyStickyOperations(v),!1}return g.copyPrivates(O,v),g.discardError(s,O,A),o&&v.isSameNode(o)&&g.isFormInput(v)?(this.trackBefore("updated",v,O),g.mergeFocusedInput(v,O),g.syncAttrsToProps(v),k.push(v),g.applyStickyOperations(v),!1):(g.isPhxUpdate(O,f,["append","prepend"])&&K.push(new Et(v,O,O.getAttribute(f))),g.syncAttrsToProps(O),g.applyStickyOperations(O),this.trackBefore("updated",v,O),!0)}})}),t.isDebugEnabled()&&wi(),K.length>0&&t.time("post-morph append/prepend restoration",()=>{K.forEach(v=>v.perform())}),t.silenceEvents(()=>g.restoreFocus(o,h,c)),g.dispatchEvent(document,"phx:update"),L.forEach(v=>this.trackAfter("added",v)),k.forEach(v=>this.trackAfter("updated",v)),M.length>0&&(t.transitionRemoves(M),t.requestDOMUpdate(()=>{M.forEach(v=>v.remove()),this.trackAfter("transitionsDiscarded",M)})),V&&(t.disconnect(),V.submit()),!0}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(Ke)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=g.findComponentNodeList(this.container,this.targetCID);return i.length===0&&g.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,i,n){let s=this.isCIDPatch(),o=s&&n.getAttribute(j)===this.targetCID.toString();if(!s||o)return t;{let h=null,c=document.createElement("template");h=g.cloneNode(n);let[f,...A]=g.findComponentNodeList(h,this.targetCID);return c.innerHTML=t,A.forEach(m=>m.remove()),Array.from(h.childNodes).forEach(m=>{m.id&&m.nodeType===Node.ELEMENT_NODE&&m.getAttribute(j)!==this.targetCID.toString()&&(m.setAttribute(Ke,""),m.innerHTML="")}),Array.from(c.content.childNodes).forEach(m=>h.insertBefore(m,f)),f.remove(),h.outerHTML}}};var tt=class{static extract(e){let{[Xt]:t,[Ft]:i,[Bt]:n}=e;return delete e[Xt],delete e[Ft],delete e[Bt],{diff:e,title:n,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){return this.recursiveToString(this.rendered,this.rendered[X],e)}recursiveToString(e,t=e[X],i){i=i?new Set(i):null;let n={buffer:"",components:t,onlyCids:i};return this.toOutputBuffer(e,null,n),n.buffer}componentCIDs(e){return Object.keys(e[X]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[X]?Object.keys(e).length===1:!1}getComponent(e,t){return e[X][t]}mergeDiff(e){let t=e[X],i={};if(delete e[X],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[X]=this.rendered[X]||{},t){let n=this.rendered[X];for(let s in t)t[s]=this.cachedFindComponent(s,t[s],n,t,i);for(let s in t)n[s]=t[s];e[X]=t}}cachedFindComponent(e,t,i,n,s){if(s[e])return s[e];{let o,h,c=t[ie];if(ve(c)){let f;c>0?f=this.cachedFindComponent(c,n[c],i,n,s):f=i[-c],h=f[ie],o=this.cloneMerge(f,t),o[ie]=h}else o=t[ie]!==void 0?t:this.cloneMerge(i[e]||{},t);return s[e]=o,o}}mutableMerge(e,t){return t[ie]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let n=t[i],s=e[i];Ie(n)&&n[ie]===void 0&&Ie(s)?this.doMutableMerge(s,n):e[i]=n}}cloneMerge(e,t){let i=Te(Te({},e),t);for(let n in i){let s=t[n],o=e[n];Ie(s)&&s[ie]===void 0&&Ie(o)&&(i[n]=this.cloneMerge(o,s))}return i}componentToString(e){return this.recursiveCIDToString(this.rendered[X],e)}pruneCIDs(e){e.forEach(t=>delete this.rendered[X][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[ie]}templateStatic(e,t){return typeof e=="number"?t[e]:e}toOutputBuffer(e,t,i){if(e[jt])return this.comprehensionToBuffer(e,t,i);let{[ie]:n}=e;n=this.templateStatic(n,t),i.buffer+=n[0];for(let s=1;s<n.length;s++)this.dynamicToBuffer(e[s-1],t,i),i.buffer+=n[s]}comprehensionToBuffer(e,t,i){let{[jt]:n,[ie]:s}=e;s=this.templateStatic(s,t);let o=e[Pi];for(let h=0;h<n.length;h++){let c=n[h];i.buffer+=s[0];for(let f=1;f<s.length;f++)this.dynamicToBuffer(c[f-1],o,i),i.buffer+=s[f]}}dynamicToBuffer(e,t,i){typeof e=="number"?i.buffer+=this.recursiveCIDToString(i.components,e,i.onlyCids):Ie(e)?this.toOutputBuffer(e,t,i):i.buffer+=e}recursiveCIDToString(e,t,i){let n=e[t]||$(`no component for CID ${t}`,e),s=document.createElement("template");s.innerHTML=this.recursiveToString(n,e,i);let o=s.content,h=i&&!i.has(t),[c,f]=Array.from(o.childNodes).reduce(([A,m],y,T)=>y.nodeType===Node.ELEMENT_NODE?y.getAttribute(j)?[A,!0]:(y.setAttribute(j,t),y.id||(y.id=`${this.parentViewId()}-${t}-${T}`),h&&(y.setAttribute(Ke,""),y.innerHTML=""),[!0,m]):y.nodeValue.trim()!==""?($(`only HTML element tags are allowed at the root of components.

got: "${y.nodeValue.trim()}"

within:
`,s.innerHTML.trim()),y.replaceWith(this.createSpan(y.nodeValue,t)),[!0,m]):(y.remove(),[A,m]),[!1,!1]);return!c&&!f?($(`expected at least one HTML element tag inside a component, but the component is empty:
`,s.innerHTML.trim()),this.createSpan("",t).outerHTML):(!c&&f&&$("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",s.innerHTML.trim()),s.innerHTML)}createSpan(e,t){let i=document.createElement("span");return i.innerText=e,i.setAttribute(j,t),i}};var $n=1,de=class{static makeID(){return $n++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.__liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let n in this.__callbacks)this[n]=this.__callbacks[n]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(null,e,t,i)}pushEventTo(e,t,i={},n=function(){}){return this.__view.withinTargets(e,(s,o)=>s.pushHookEvent(o,t,i,n))}handleEvent(e,t){let i=(n,s)=>s?e:t(n.detail);return window.addEventListener(`phx:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,n=>n.dispatchUploads(t,i))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}};var Wt=(r,e={})=>{let t=new FormData(r),i=[];t.forEach((s,o,h)=>{s instanceof File&&i.push(o)}),i.forEach(s=>t.delete(s));let n=new URLSearchParams;for(let[s,o]of t.entries())n.append(s,o);for(let s in e)n.append(s,e[s]);return n.toString()},fe=class{constructor(e,t,i,n){this.liveSocket=t,this.flash=n,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(){},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(),session:this.getSession(),static:this.getStatic(),flash:this.flash})),this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel()}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.liveSocket.main===this}connectParams(){let e=this.liveSocket.params(this.el),t=g.all(document,`[${this.binding(di)}]`).map(i=>i.src||i.href).filter(i=>typeof i=="string");return t.length>0&&(e._track_static=t),e._mounts=this.joinCount,e}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(G)}getStatic(){let e=this.el.getAttribute(ue);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};g.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(Ht,We,Nt),this.el.classList.add(...e)}isLoading(){return this.el.classList.contains(We)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(We)}}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(Ht)}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}withinTargets(e,t){if(e instanceof HTMLElement)return this.liveSocket.owner(e,i=>t(i,e));if(/^(0|[1-9]\d*)$/.test(e)){let i=g.findComponentNodeList(this.el,e);i.length===0?$(`no component found matching phx-target of ${e}`):t(this,i[0])}else{let i=Array.from(document.querySelectorAll(e));i.length===0&&$(`nothing found matching the phx-target selector "${e}"`),i.forEach(n=>this.liveSocket.owner(n,s=>t(s,n)))}}applyDiff(e,t,i){this.log(e,()=>["",Le(t)]);let{diff:n,reply:s,events:o,title:h}=tt.extract(t);return h&&g.putTitle(h),i({diff:n,reply:s,events:o}),s}onJoin(e){console.log(e);let{rendered:t,container:i}=e;if(i){let[n,s]=i;this.el=g.replaceRootContainer(this.el,n,s)}this.childJoins=0,this.joinPending=!0,this.flash=null,se.dropLocal(this.liveSocket.localStorage,window.location.pathname,at),this.applyDiff("mount",t,({diff:n,events:s})=>{this.rendered=new tt(this.id,n);let o=this.renderContainer(null,"join");console.log(o),this.dropPendingRefs();let h=this.formsForRecovery(o);console.log(h),this.joinCount++,h.length>0?h.forEach(([c,f,A],m)=>{this.pushFormRecovery(c,A,y=>{m===h.length-1&&this.onJoinComplete(y,o,s)})}):this.onJoinComplete(e,o,s)})}dropPendingRefs(){g.all(this.el,`[${z}]`,e=>e.removeAttribute(z))}onJoinComplete({live_patch:e},t,i){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i);g.findPhxChildrenInFragment(t,this.id).filter(s=>{let o=s.id&&this.el.querySelector(`[id="${s.id}"]`),h=o&&o.getAttribute(ue);return h&&s.setAttribute(ue,h),this.joinChild(s)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)])}attachTrueDocEl(){this.el=g.byId(this.id),this.el.setAttribute(ae,this.root.id)}dispatchEvents(e){e.forEach(([t,i])=>{window.dispatchEvent(new CustomEvent(`phx:hook:${t}`,{detail:i}))})}applyJoinPatch(e,t,i){console.log("applying join patch"),this.attachTrueDocEl();let n=new _e(this,this.el.renderRoot,this.id,t,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1),this.joinNewChildren(),g.all(this.el,`[${this.binding(Ye)}], [data-phx-${Ye}]`,s=>{let o=this.addHook(s);o&&o.__mounted()}),this.joinPending=!1,this.dispatchEvents(i),this.applyPendingUpdates(),e){let{kind:s,to:o}=e;this.liveSocket.historyPatch(o,s)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),n=i&&g.isIgnored(e,this.binding(Ze));if(i&&!e.isEqualNode(t)&&!(n&&xi(e.dataset,t.dataset)))return i.__beforeUpdate(),i}performPatch(e,t){let i=[],n=!1,s=new Set;return e.after("added",o=>{this.liveSocket.triggerDOM("onNodeAdded",[o]);let h=this.addHook(o);h&&h.__mounted()}),e.after("phxChildAdded",o=>n=!0),e.before("updated",(o,h)=>{this.triggerBeforeUpdateHook(o,h)&&s.add(o.id)}),e.after("updated",o=>{s.has(o.id)&&this.getHook(o).__updated()}),e.after("discarded",o=>{let h=this.componentID(o);ve(h)&&i.indexOf(h)===-1&&i.push(h);let c=this.getHook(o);c&&this.destroyHook(c)}),e.perform(),t&&this.maybePushComponentsDestroyed(i),n}joinNewChildren(){g.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(ce)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new fe(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(),this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{g.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(s=>{this.componentPatch(this.rendered.getComponent(e,s),s)&&(i=!0)})}):Vt(e)||this.liveSocket.time("full patch complete",()=>{let n=this.renderContainer(e,"update"),s=new _e(this,this.el.renderRoot,this.id,n,null);i=this.performPatch(s,!0)}),this.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,n=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,s=this.rendered.toString(n);return`<${i}>${s}</${i}>`})}componentPatch(e,t){if(Vt(e))return!1;let i=this.rendered.componentToString(t),n=new _e(this,this.el.renderRoot,this.id,i,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[de.elementID(e)]}addHook(e){if(de.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${Ye}`)||e.getAttribute(this.binding(Ye));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||$(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let n=new de(this,e,i);return this.viewHooks[de.elementID(n.el)]=n,n}else t!==null&&$(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[de.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[]}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):t(i)})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){for(let e in this.root.children[this.id])this.getChildById(e).destroy()}onLiveRedirect(e){let{to:t,kind:i,flash:n}=e,s=this.expandURL(t);this.liveSocket.historyRedirect(s,i,n)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}join(e){this.parent||(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=()=>e&&e(this.joinCount),this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>!this.isDestroyed()&&this.onJoin(t)).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){return console.log(e),e.reason==="unauthorized"||e.reason==="stale"?(this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href})):((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect?this.onRedirect(e.redirect):e.live_redirect?this.onLiveRedirect(e.live_redirect):(this.log("error",()=>["unable to join",e]),this.liveSocket.reloadWithJitter(this)))}onClose(e){if(!this.isDestroyed()){if(this.isJoinPending()&&document.visibilityState!=="hidden"||this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(Ei)}}onError(e){this.onClose(e),this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||this.displayError()}displayError(){this.isMain()&&g.dispatchEvent(window,"phx:page-loading-start",{to:this.href,kind:"error"}),this.showLoader(),this.setContainerClasses(We,Nt)}pushWithReply(e,t,i,n=function(){}){if(!this.isConnected())return;let[s,[o]]=e?e():[null,[]],h=function(){};return o&&o.getAttribute(this.binding(Dt))!==null&&(h=this.liveSocket.withPageLoading({kind:"element",target:o})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,ki).receive("ok",c=>{let f=null;s!==null&&this.undoRefs(s),c.diff&&(f=this.applyDiff("update",c.diff,({diff:A,events:m})=>{this.update(A,m)})),c.redirect&&this.onRedirect(c.redirect),c.live_patch&&this.onLivePatch(c.live_patch),c.live_redirect&&this.onLiveRedirect(c.live_redirect),h(),n(c,f)}))}undoRefs(e){g.all(this.el.renderRoot,`[${z}="${e}"]`,t=>{let i=t.getAttribute(ze);t.removeAttribute(z),t.getAttribute(mt)!==null&&(t.readOnly=!1,t.removeAttribute(mt)),i!==null&&(t.disabled=i==="true",t.removeAttribute(ze)),lt.forEach(o=>g.removeClass(t,o));let n=t.getAttribute(qe);n!==null&&(t.innerText=n,t.removeAttribute(qe));let s=g.private(t,z);if(s){let o=this.triggerBeforeUpdateHook(t,s);_e.patchEl(t,s,this.liveSocket.getActiveElement()),o&&o.__updated(),g.deletePrivate(t,z)}})}putRef(e,t){let i=this.ref++,n=this.binding(Ge);return e.forEach(s=>{s.classList.add(`phx-${t}-loading`),s.setAttribute(z,i);let o=s.getAttribute(n);o!==null&&(s.getAttribute(qe)||s.setAttribute(qe,s.innerText),s.innerText=o)}),[i,e]}componentID(e){let t=e.getAttribute&&e.getAttribute(j);return t?parseInt(t):null}targetComponentID(e,t){return e.getAttribute(this.binding("target"))?this.closestComponentID(t):null}closestComponentID(e){return e?q(e.closest(`[${j}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",t,i]),!1;let[s,o]=this.putRef([],"hook");return this.pushWithReply(()=>[s,o],"event",{type:"hook",event:t,value:i,cid:this.closestComponentID(e)},(h,c)=>n(c,s)),s}extractMeta(e,t){let i=this.binding("value-");for(let n=0;n<e.attributes.length;n++){let s=e.attributes[n].name;s.startsWith(i)&&(t[s.replace(i,"")]=e.getAttribute(s))}return e.value!==void 0&&(t.value=e.value,e.tagName==="INPUT"&&pt.indexOf(e.type)>=0&&!e.checked&&delete t.value),t}pushEvent(e,t,i,n,s){this.pushWithReply(()=>this.putRef([t],e),"event",{type:e,event:n,value:this.extractMeta(t,s),cid:this.targetComponentID(t,i)})}pushKey(e,t,i,n,s){this.pushWithReply(()=>this.putRef([e],i),"event",{type:i,event:n,value:this.extractMeta(e,s),cid:this.targetComponentID(e,t)})}pushFileProgress(e,t,i,n=function(){}){this.liveSocket.withinOwners(e.form,(s,o)=>{s.pushWithReply(null,"progress",{event:e.getAttribute(s.binding(_i)),ref:e.getAttribute(ee),entry_ref:t,progress:i,cid:s.targetComponentID(e.form,o)},n)})}pushInput(e,t,i,n,s,o){let h,c=ve(i)?i:this.targetComponentID(e.form,t),f=()=>this.putRef([e,e.form],"change"),A=Wt(e.form,{_target:s.name});g.isUploadInput(e)&&e.files&&e.files.length>0&&H.trackFiles(e,Array.from(e.files)),h=H.serializeUploads(e);let m={type:"form",event:n,value:A,uploads:h,cid:c};this.pushWithReply(f,"event",m,y=>{if(g.showError(e,this.liveSocket.binding(dt)),g.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(H.filesAwaitingPreflight(e).length>0){let[T,L]=f();this.uploadFiles(e.form,t,T,c,k=>{o&&o(y),this.triggerAwaitingSubmit(e.form)})}}else o&&o(y)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,n,s]=t;this.cancelSubmit(e),s()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i])=>t.isSameNode(e))}scheduleSubmit(e,t,i){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,n])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}pushFormSubmit(e,t,i,n){let s=m=>!(ye(m,`${this.binding(Ze)}=ignore`,m.form)||ye(m,"data-phx-update=ignore",m.form)),o=m=>m.hasAttribute(this.binding(Ge)),h=m=>m.tagName=="BUTTON",c=m=>["INPUT","TEXTAREA","SELECT"].includes(m.tagName),f=()=>{let m=Array.from(e.elements),y=m.filter(o),T=m.filter(h).filter(s),L=m.filter(c).filter(s);return T.forEach(k=>{k.setAttribute(ze,k.disabled),k.disabled=!0}),L.forEach(k=>{k.setAttribute(mt,k.readOnly),k.readOnly=!0,k.files&&(k.setAttribute(ze,k.disabled),k.disabled=!0)}),e.setAttribute(this.binding(Dt),""),this.putRef([e].concat(y).concat(T).concat(L),"submit")},A=this.targetComponentID(e,t);if(H.hasUploadsInProgress(e)){let[m,y]=f();return this.scheduleSubmit(e,m,()=>this.pushFormSubmit(e,t,i,n))}else if(H.inputsAwaitingPreflight(e).length>0){let[m,y]=f(),T=()=>[m,y];this.uploadFiles(e,t,m,A,L=>{let k=Wt(e,{});this.pushWithReply(T,"event",{type:"form",event:i,value:k,cid:A},n)})}else{let m=Wt(e);console.log("form data",m),this.pushWithReply(f,"event",{type:"form",event:i,value:m,cid:A},n)}}uploadFiles(e,t,i,n,s){let o=this.joinCount,h=H.activeFileInputs(e),c=h.length;h.forEach(f=>{let A=new H(f,this,()=>{c--,c===0&&s()});this.uploaders[f]=A;let m=A.entries().map(T=>T.toPreflightPayload()),y={ref:f.getAttribute(ee),entries:m,cid:this.targetComponentID(f.form,t)};this.log("upload",()=>["sending preflight request",y]),this.pushWithReply(null,"allow_upload",y,T=>{if(this.log("upload",()=>["got preflight response",T]),T.error){this.undoRefs(i);let[L,k]=T.error;this.log("upload",()=>[`error for entry ${L}`,k])}else{let L=k=>{this.channel.onError(()=>{this.joinCount===o&&k()})};A.initAdapterUpload(T,L,this.liveSocket)}})})}dispatchUploads(e,t){let i=g.findUploadInputs(this.el).filter(n=>n.name===e);i.length===0?$(`no live file inputs found matching the name "${e}"`):i.length>1?$(`duplicate live file inputs found matching the name "${e}"`):g.dispatchEvent(i[0],ct,{files:t})}pushFormRecovery(e,t,i){this.liveSocket.withinOwners(e,(n,s)=>{let o=e.elements[0],h=e.getAttribute(this.binding(Ut))||e.getAttribute(this.binding("change"));n.pushInput(o,s,t,h,o,i)})}pushLinkPatch(e,t,i){let n=this.liveSocket.setPendingLink(e),s=t?()=>this.putRef([t],"click"):null;this.pushWithReply(s,"live_patch",{url:e},o=>{o.link_redirect?this.liveSocket.replaceMain(e,null,i,n):(this.liveSocket.commitPendingLink(n)&&(this.href=e),this.applyPendingUpdates(),i&&i(n))}).receive("timeout",()=>this.liveSocket.redirect(window.location.href))}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),i=document.createElement("template");return i.innerHTML=e,g.all(this.el,`form[${t}]`).filter(n=>n.id&&this.ownsElement(n)).filter(n=>n.elements.length>0).filter(n=>n.getAttribute(this.binding(Ut))!=="ignore").map(n=>{let s=i.content.querySelector(`form[id="${n.id}"][${t}="${n.getAttribute(t)}"]`);return s?[n,s,this.componentID(s)]:[n,null,null]}).filter(([n,s,o])=>s)}maybePushComponentsDestroyed(e){let t=e.filter(i=>g.findComponentNodeList(this.el,i).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(n=>t.indexOf(n)!==-1);let i=t.filter(n=>g.findComponentNodeList(this.el,n).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},n=>{this.rendered.pruneCIDs(n.cids)})}))}ownsElement(e){return e.getAttribute(ce)===this.id||q(e.closest(re),t=>t.id)===this.id}submitForm(e,t,i){g.putPrivate(e,gt,!0),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,()=>{this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}};var Nn={exec(r,e,t,i,n){let[s,o]=n||[null,{}];(e.charAt(0)==="["?JSON.parse(e):[[s,o]]).forEach(([c,f])=>{c===s&&o.data&&(f.data=Object.assign(f.data||{},o.data)),this[`exec_${c}`](r,e,t,i,f)})},exec_dispatch(r,e,t,i,{to:n,event:s,detail:o}){n?g.all(document,n,h=>g.dispatchEvent(h,s,o)):g.dispatchEvent(i,s,o)},exec_push(r,e,t,i,n){let{event:s,data:o,target:h,page_loading:c,loading:f,value:A}=n,m={page_loading:!!c,loading:f,value:A},y=r==="change"?i.form:i,T=h||y.getAttribute(t.binding("target"))||y;t.withinTargets(T,(L,k)=>{if(r==="change"){let{newCid:K,_target:M,callback:V}=n;M&&(m._target=M),L.pushInput(i,k,K,s||e,m,V)}else r==="submit"?L.submitForm(i,k,s||e,m):L.pushEvent(r,i,k,s||e,o,m)})},exec_add_class(r,e,t,i,{to:n,names:s,transition:o,time:h}){n?g.all(document,n,c=>this.addOrRemoveClasses(c,s,[],o,h,t)):this.addOrRemoveClasses(i,s,[],o,t)},exec_remove_class(r,e,t,i,{to:n,names:s,transition:o,time:h}){n?g.all(document,n,c=>this.addOrRemoveClasses(c,[],s,o,h,t)):this.addOrRemoveClasses(i,[],s,o,h,t)},exec_transition(r,e,t,i,{time:n,to:s,names:o}){(s?g.all(document,s):[i]).forEach(c=>{this.addOrRemoveClasses(c,o,[]),t.transition(n,()=>this.addOrRemoveClasses(c,[],o))})},exec_toggle(r,e,t,i,{to:n,display:s,ins:o,outs:h,time:c}){n?g.all(document,n,f=>this.toggle(r,t,f,s,o||[],h||[],c)):this.toggle(r,t,i,s,o||[],h||[],c)},exec_show(r,e,t,i,{to:n,display:s,transition:o,time:h}){n?g.all(document,n,c=>this.show(r,t,c,s,o,h)):this.show(r,t,i,o,h)},exec_hide(r,e,t,i,{to:n,display:s,transition:o,time:h}){n?g.all(document,n,c=>this.hide(r,t,c,s,o,h)):this.hide(r,t,i,s,o,h)},show(r,e,t,i,n,s){let o=this.isVisible(t);n.length>0&&!o?this.toggle(r,e,t,i,n,[],s):o||this.toggle(r,e,t,i,[],[],null)},hide(r,e,t,i,n,s){let o=this.isVisible(t);n.length>0&&o?this.toggle(r,e,t,i,[],n,s):o&&this.toggle(r,e,t,i,[],[],s)},toggle(r,e,t,i,n,s,o){if(n.length>0||s.length>0)if(this.isVisible(t))this.addOrRemoveClasses(t,s,n),e.transition(o,()=>{g.putSticky(t,"toggle",h=>h.style.display="none"),this.addOrRemoveClasses(t,[],s)});else{if(r==="remove")return;this.addOrRemoveClasses(t,n,s),g.putSticky(t,"toggle",h=>h.style.display=i||"block"),e.transition(o,()=>{this.addOrRemoveClasses(t,[],n)})}else{let h=this.isVisible(t)?"none":i||"block";g.putSticky(t,"toggle",c=>c.style.display=h)}},addOrRemoveClasses(r,e,t,i,n,s){if(i&&i.length>0)return this.addOrRemoveClasses(r,i,[]),s.transition(n,()=>this.addOrRemoveClasses(r,e,t.concat(i)));window.requestAnimationFrame(()=>{let[o,h]=g.getSticky(r,"classes",[[],[]]),c=e.filter(y=>o.indexOf(y)<0&&!r.classList.contains(y)),f=t.filter(y=>h.indexOf(y)<0&&r.classList.contains(y)),A=o.filter(y=>t.indexOf(y)<0).concat(c),m=h.filter(y=>e.indexOf(y)<0).concat(f);g.putSticky(r,"classes",y=>(y.classList.remove(...m),y.classList.add(...A),[A,m]))})},hasAllClasses(r,e){return e.every(t=>r.classList.contains(t))},isVisible(r){let e=window.getComputedStyle(r);return!(e.opacity===0||e.display==="none")},isToggledOut(r,e){return!this.isVisible(r)||this.hasAllClasses(r,e)}},le=Nn;var De=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import LiveSocket from "live_element"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||Si,this.opts=i,this.params=At(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(Le(Ci),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=Le(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||Ai,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:At(),onBeforeElUpdated:At()},i.dom||{}),this.transitions=new Ni,window.addEventListener("pagehide",n=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}isProfileEnabled(){return this.sessionStorage.getItem(yt)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(vt)==="true"}enableDebug(){this.sessionStorage.setItem(vt,"true")}enableProfiling(){this.sessionStorage.setItem(yt,"true")}disableDebug(){this.sessionStorage.removeItem(vt)}disableProfiling(){this.sessionStorage.removeItem(yt)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(bt,e)}disableLatencySim(){this.sessionStorage.removeItem(bt)}getLatencySim(){let e=this.sessionStorage.getItem(bt);return e?parseInt(e):null}getSocket(){return this.socket}connect(){let e=()=>{this.joinRootViews()&&(this.bindTopLevelEvents(),this.socket.connect())};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){this.socket.disconnect(e)}execJS(e,t,i=null){this.owner(e,n=>le.exec(i,t,n,e))}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[n,s]=i();this.viewLogger(e,t,n,s)}else if(this.isDebugEnabled()){let[n,s]=i();Ti(e,t,n,s)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,t=function(){}){this.transitions.addTransition(e,t)}onChannel(e,t,i){e.on(t,n=>{let s=this.getLatencySim();s?(console.log(`simulating ${s}ms of latency from server to client`),setTimeout(()=>i(n),s)):i(n)})}wrapPush(e,t,i){let n=this.getLatencySim(),s=e.joinCount;if(!n)return t.timeout?i().receive("timeout",()=>{e.joinCount===s&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();console.log(`simulating ${n}ms of latency from client to server`);let o={receives:[],receive(h,c){this.receives.push([h,c])}};return setTimeout(()=>{e.isDestroyed()||o.receives.reduce((h,[c,f])=>h.receive(c,f),i())},n),o}reloadWithJitter(e,t){e.destroy(),this.disconnect();let[i,n]=ci,s=Math.floor(Math.random()*(n-i+1))+i,o=se.updateLocal(this.localStorage,window.location.pathname,at,0,h=>h+1);t?t():this.log(e,"join",()=>[`encountered ${o} consecutive reloads`]),o>Lt&&(this.log(e,"join",()=>[`exceeded ${Lt} consecutive reloads. Entering failsafe mode`]),s=ui),setTimeout(()=>{this.hasPendingLink()?window.location=this.pendingLink:window.location.reload()},s)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?Ii[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinRootViews(){let e=!1;return g.all(document,`${re}:not([${ce}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.getAttribute(ut)&&(this.main=i)}e=!0}),e}redirect(e,t){this.disconnect(),se.redirect(e,t)}replaceMain(e,t,i=null,n=this.setPendingLink(e)){let s=this.main.el,o=g.cloneNode(s,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,t),this.main.setRedirect(e),this.transitionRemoves(),this.main.join((h,c)=>{h===1&&this.commitPendingLink(n)&&this.requestDOMUpdate(()=>{s.replaceWith(o),i&&i(),c()})})}transitionRemoves(e){let t=this.binding("remove");e=e||g.all(document,`[${t}]`),e.forEach(i=>{document.body.contains(i)&&this.execJS(i,i.getAttribute(t),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(G)!==null}newRootView(e,t){let i=new fe(e,this,null,t);return this.roots[i.id]=i,i}owner(e,t){let i=q(e.closest(re),n=>this.getViewByEl(n));i&&t(i)}withinOwners(e,t){this.owner(e,i=>t(i,e))}getViewByEl(e){let t=e.getAttribute(ae);return q(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e]}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(ae));t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents(){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",e=>{e.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),this.bindNav(),this.bindClicks(),this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(e,t,i,n,s,o)=>{let h=n.getAttribute(this.binding(bi)),c=e.key&&e.key.toLowerCase();if(h&&h.toLowerCase()!==c)return;let f=Te({key:e.key},this.eventMeta(t,e,n));le.exec(t,s,i,n,["push",{data:f}])}),this.bind({blur:"focusout",focus:"focusin"},(e,t,i,n,s,o)=>{if(!o){let h=Te({key:e.key},this.eventMeta(t,e,n));le.exec(t,s,i,n,["push",{data:h}])}}),this.bind({blur:"blur",focus:"focus"},(e,t,i,n,s,o,h)=>{if(h==="window"){let c=this.eventMeta(t,e,n);le.exec(t,o,i,n,["push",{data:c}])}}),window.addEventListener("dragover",e=>e.preventDefault()),window.addEventListener("drop",e=>{e.preventDefault();let t=q(ye(e.target,this.binding(It)),s=>s.getAttribute(this.binding(It))),i=t&&document.getElementById(t),n=Array.from(e.dataTransfer.files||[]);!i||i.disabled||n.length===0||!(i.files instanceof FileList)||(H.trackFiles(i,n),i.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(ct,e=>{let t=e.target;if(!g.isUploadInput(t))return;let i=Array.from(e.detail.files||[]).filter(n=>n instanceof File||n instanceof Blob);H.trackFiles(t,i),t.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let n=this.metadataCallbacks[e];return n?n(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let n=e[i];this.on(n,s=>{let o=this.binding(i),h=this.binding(`window-${i}`),c=s.target.getAttribute&&s.target.getAttribute(o);c?this.debounce(s.target,s,()=>{this.withinOwners(s.target,f=>{t(s,i,f,s.target,c,null)})}):g.all(document,`[${h}]`,f=>{let A=f.getAttribute(h);this.debounce(f,s,()=>{this.withinOwners(f,m=>{t(s,i,m,f,A,"window")})})})})}}bindClicks(){this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,i){let n=this.binding(t);window.addEventListener(e,s=>{if(!this.isConnected())return;let o=null;i?o=s.target.matches(`[${n}]`)?s.target:s.target.querySelector(`[${n}]`):(o=ye(s.target,n),this.dispatchClickAway(s));let h=o&&o.getAttribute(n);!h||(o.getAttribute("href")==="#"&&s.preventDefault(),this.debounce(o,s,()=>{this.withinOwners(o,c=>{le.exec("click",h,c,o,["push",{data:this.eventMeta("click",s,o)}])})}))},i)}dispatchClickAway(e){let t=this.binding("click-away");g.all(document,`[${t}]`,i=>{i.isSameNode(e.target)||i.contains(e.target)||this.withinOwners(e.target,n=>{let s=i.getAttribute(t);le.exec("click",s,n,e.target,["push",{data:this.eventMeta("click",e,e.target)}])})})}bindNav(){if(!se.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{se.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:n,root:s,scroll:o}=t.state||{},h=window.location.href;this.requestDOMUpdate(()=>{this.main.isConnected()&&i==="patch"&&n===this.main.id?this.main.pushLinkPatch(h,null):this.replaceMain(h,null,()=>{s&&this.replaceRootHistory(),typeof o=="number"&&setTimeout(()=>{window.scrollTo(0,o)},0)})})},!1),window.addEventListener("click",t=>{let i=ye(t.target,ht),n=i&&i.getAttribute(ht),s=t.metaKey||t.ctrlKey||t.button===1;if(!n||!this.isConnected()||!this.main||s)return;let o=i.href,h=i.getAttribute(fi);t.preventDefault(),this.pendingLink!==o&&this.requestDOMUpdate(()=>{if(n==="patch")this.pushHistoryPatch(o,h,i);else if(n==="redirect")this.historyRedirect(o,h);else throw new Error(`expected ${ht} to be "patch" or "redirect", got: ${n}`)})},!1)}dispatchEvent(e,t={}){g.dispatchEvent(window,`phx:${e}`,t)}dispatchEvents(e){e.forEach(([t,i])=>this.dispatchEvent(t,i))}withPageLoading(e,t){g.dispatchEvent(window,"phx:page-loading-start",e);let i=()=>g.dispatchEvent(window,"phx:page-loading-stop",e);return t?t(i):i}pushHistoryPatch(e,t,i){this.withPageLoading({to:e,kind:"patch"},n=>{this.main.pushLinkPatch(e,i,s=>{this.historyPatch(e,t,s),n()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(se.pushState(t,{type:"patch",id:this.main.id},e),this.registerNewLocation(window.location))}historyRedirect(e,t,i){let n=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},s=>{this.replaceMain(e,i,()=>{se.pushState(t,{type:"redirect",id:this.main.id,scroll:n},e),this.registerNewLocation(window.location),s()})})}replaceRootHistory(){se.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=Le(e),!0)}bindForms(){let e=0;this.on("submit",t=>{let i=t.target.getAttribute(this.binding("submit"));!i||(t.preventDefault(),t.target.disabled=!0,this.withinOwners(t.target,n=>{le.exec("submit",i,n,t.target,["push",{}])}))},!1);for(let t of["change","input"])this.on(t,i=>{let n=i.target,s=n.form&&n.form.getAttribute(this.binding("change"));if(!s||n.type==="number"&&n.validity&&n.validity.badInput)return;let o=e;e++;let{at:h,type:c}=g.private(n,"prev-iteration")||{};h===o-1&&t!==c||(g.putPrivate(n,"prev-iteration",{at:o,type:t}),this.debounce(n,i,()=>{this.withinOwners(n.form,f=>{g.putPrivate(n,ft,!0),g.isTextualInput(n)||this.setActiveElement(n),le.exec("change",s,f,n,["push",{_target:i.target.name}])})}))},!1)}debounce(e,t,i){let n=this.binding(vi),s=this.binding(yi),o=this.defaults.debounce.toString(),h=this.defaults.throttle.toString();g.debounce(e,t,n,o,s,h,i)}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}},Ni=class{constructor(){this.transitions=new Set,this.pendingOps=[],this.reset()}reset(){this.transitions.forEach(e=>{cancelTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,t){let i=setTimeout(()=>{this.transitions.delete(i),t(),this.size()===0&&this.flushPendingOps()},e);this.transitions.add(i)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){this.pendingOps.forEach(e=>e()),this.pendingOps=[]}};var Ct=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zt=Symbol(),Ui=new Map,Pt=class{constructor(e,t){if(this._$cssResult$=!0,t!==zt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=Ui.get(this.cssText);return Ct&&e===void 0&&(Ui.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}},Mi=r=>new Pt(typeof r=="string"?r:r+"",zt),Gt=(r,...e)=>{let t=r.length===1?r[0]:e.reduce((i,n,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+r[s+1],r[0]);return new Pt(t,zt)},qt=(r,e)=>{Ct?r.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{let i=document.createElement("style"),n=window.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=t.cssText,r.appendChild(i)})},wt=Ct?r=>r:r=>r instanceof CSSStyleSheet?(e=>{let t="";for(let i of e.cssRules)t+=i.cssText;return Mi(t)})(r):r;var Yt,ji=window.reactiveElementPolyfillSupport,Zt={toAttribute(r,e){switch(e){case Boolean:r=r?"":null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){let t=r;switch(e){case Boolean:t=r!==null;break;case Number:t=r===null?null:Number(r);break;case Object:case Array:try{t=JSON.parse(r)}catch(i){t=null}}return t}},Fi=(r,e)=>e!==r&&(e==e||r==r),Qt={attribute:!0,type:String,converter:Zt,reflect:!1,hasChanged:Fi},pe=class extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;(t=this.l)!==null&&t!==void 0||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();let e=[];return this.elementProperties.forEach((t,i)=>{let n=this._$Eh(i,t);n!==void 0&&(this._$Eu.set(n,i),e.push(n))}),e}static createProperty(e,t=Qt){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){let i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){let s=this[e];this[t]=n,this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Qt}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;let e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){let t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(let n of i)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let i=new Set(e.flat(1/0).reverse());for(let n of i)t.unshift(wt(n))}else e!==void 0&&t.push(wt(e));return t}static _$Eh(e,t){let i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}o(){var e;this._$Ev=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Ep(),this.requestUpdate(),(e=this.constructor.l)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$Em)!==null&&t!==void 0?t:this._$Em=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$Em)===null||t===void 0||t.splice(this._$Em.indexOf(e)>>>0,1)}_$Ep(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;let t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return qt(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$Em)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$Em)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$Eg(e,t,i=Qt){var n,s;let o=this.constructor._$Eh(e,i);if(o!==void 0&&i.reflect===!0){let h=((s=(n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==null&&s!==void 0?s:Zt.toAttribute)(t,i.type);this._$Ei=e,h==null?this.removeAttribute(o):this.setAttribute(o,h),this._$Ei=null}}_$AK(e,t){var i,n,s;let o=this.constructor,h=o._$Eu.get(e);if(h!==void 0&&this._$Ei!==h){let c=o.getPropertyOptions(h),f=c.converter,A=(s=(n=(i=f)===null||i===void 0?void 0:i.fromAttribute)!==null&&n!==void 0?n:typeof f=="function"?f:null)!==null&&s!==void 0?s:Zt.fromAttribute;this._$Ei=h,this[h]=A(t,c.type),this._$Ei=null}}requestUpdate(e,t,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Fi)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$Ei!==e&&(this._$ES===void 0&&(this._$ES=new Map),this._$ES.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$Ev=this._$EC())}_$EC(){return hi(this,null,function*(){this.isUpdatePending=!0;try{yield this._$Ev}catch(t){Promise.reject(t)}let e=this.scheduleUpdate();return e!=null&&(yield e),!this.isUpdatePending})}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach((n,s)=>this[s]=n),this._$Et=void 0);let t=!1,i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$Em)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostUpdate)===null||s===void 0?void 0:s.call(n)}),this.update(i)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$Em)===null||t===void 0||t.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ev}shouldUpdate(e){return!0}update(e){this._$ES!==void 0&&(this._$ES.forEach((t,i)=>this._$Eg(i,this[i],t)),this._$ES=void 0),this._$EU()}updated(e){}firstUpdated(e){}};pe.finalized=!0,pe.elementProperties=new Map,pe.elementStyles=[],pe.shadowRootOptions={mode:"open"},ji==null||ji({ReactiveElement:pe}),((Yt=globalThis.reactiveElementVersions)!==null&&Yt!==void 0?Yt:globalThis.reactiveElementVersions=[]).push("1.0.1");var ei,Tt=globalThis.trustedTypes,Xi=Tt?Tt.createPolicy("lit-html",{createHTML:r=>r}):void 0,ge=`lit$${(Math.random()+"").slice(9)}$`,Bi="?"+ge,Un=`<${Bi}>`,He=document,it=(r="")=>He.createComment(r),nt=r=>r===null||typeof r!="object"&&typeof r!="function",Vi=Array.isArray,Mn=r=>{var e;return Vi(r)||typeof((e=r)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},rt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ji=/-->/g,Ki=/>/g,Ae=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Wi=/'/g,zi=/"/g,Gi=/^(?:script|style|textarea)$/i,qi=r=>(e,...t)=>({_$litType$:r,strings:e,values:t}),qr=qi(1),Yr=qi(2),Ee=Symbol.for("lit-noChange"),U=Symbol.for("lit-nothing"),Yi=new WeakMap,Zi=(r,e,t)=>{var i,n;let s=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e,o=s._$litPart$;if(o===void 0){let h=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:null;s._$litPart$=o=new Me(e.insertBefore(it(),h),h,void 0,t!=null?t:{})}return o._$AI(r),o},$e=He.createTreeWalker(He,129,null,!1),jn=(r,e)=>{let t=r.length-1,i=[],n,s=e===2?"<svg>":"",o=rt;for(let c=0;c<t;c++){let f=r[c],A,m,y=-1,T=0;for(;T<f.length&&(o.lastIndex=T,m=o.exec(f),m!==null);)T=o.lastIndex,o===rt?m[1]==="!--"?o=Ji:m[1]!==void 0?o=Ki:m[2]!==void 0?(Gi.test(m[2])&&(n=RegExp("</"+m[2],"g")),o=Ae):m[3]!==void 0&&(o=Ae):o===Ae?m[0]===">"?(o=n!=null?n:rt,y=-1):m[1]===void 0?y=-2:(y=o.lastIndex-m[2].length,A=m[1],o=m[3]===void 0?Ae:m[3]==='"'?zi:Wi):o===zi||o===Wi?o=Ae:o===Ji||o===Ki?o=rt:(o=Ae,n=void 0);let L=o===Ae&&r[c+1].startsWith("/>")?" ":"";s+=o===rt?f+Un:y>=0?(i.push(A),f.slice(0,y)+"$lit$"+f.slice(y)+ge+L):f+ge+(y===-2?(i.push(void 0),c):L)}let h=s+(r[t]||"<?>")+(e===2?"</svg>":"");return[Xi!==void 0?Xi.createHTML(h):h,i]},Ne=class{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let s=0,o=0,h=e.length-1,c=this.parts,[f,A]=jn(e,t);if(this.el=Ne.createElement(f,i),$e.currentNode=this.el.content,t===2){let m=this.el.content,y=m.firstChild;y.remove(),m.append(...y.childNodes)}for(;(n=$e.nextNode())!==null&&c.length<h;){if(n.nodeType===1){if(n.hasAttributes()){let m=[];for(let y of n.getAttributeNames())if(y.endsWith("$lit$")||y.startsWith(ge)){let T=A[o++];if(m.push(y),T!==void 0){let L=n.getAttribute(T.toLowerCase()+"$lit$").split(ge),k=/([.?@])?(.*)/.exec(T);c.push({type:1,index:s,name:k[2],strings:L,ctor:k[1]==="."?en:k[1]==="?"?tn:k[1]==="@"?nn:st})}else c.push({type:6,index:s})}for(let y of m)n.removeAttribute(y)}if(Gi.test(n.tagName)){let m=n.textContent.split(ge),y=m.length-1;if(y>0){n.textContent=Tt?Tt.emptyScript:"";for(let T=0;T<y;T++)n.append(m[T],it()),$e.nextNode(),c.push({type:2,index:++s});n.append(m[y],it())}}}else if(n.nodeType===8)if(n.data===Bi)c.push({type:2,index:s});else{let m=-1;for(;(m=n.data.indexOf(ge,m+1))!==-1;)c.push({type:7,index:s}),m+=ge.length-1}s++}}static createElement(e,t){let i=He.createElement("template");return i.innerHTML=e,i}};function Ue(r,e,t=r,i){var n,s,o,h;if(e===Ee)return e;let c=i!==void 0?(n=t._$Cl)===null||n===void 0?void 0:n[i]:t._$Cu,f=nt(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==f&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),f===void 0?c=void 0:(c=new f(r),c._$AT(r,t,i)),i!==void 0?((o=(h=t)._$Cl)!==null&&o!==void 0?o:h._$Cl=[])[i]=c:t._$Cu=c),c!==void 0&&(e=Ue(r,c._$AS(r,e.values),c,i)),e}var Qi=class{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;let{el:{content:i},parts:n}=this._$AD,s=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:He).importNode(i,!0);$e.currentNode=s;let o=$e.nextNode(),h=0,c=0,f=n[0];for(;f!==void 0;){if(h===f.index){let A;f.type===2?A=new Me(o,o.nextSibling,this,e):f.type===1?A=new f.ctor(o,f.name,f.strings,this,e):f.type===6&&(A=new rn(o,this,e)),this.v.push(A),f=n[++c]}h!==(f==null?void 0:f.index)&&(o=$e.nextNode(),h++)}return s}m(e){let t=0;for(let i of this.v)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}},Me=class{constructor(e,t,i,n){var s;this.type=2,this._$AH=U,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cg=(s=n==null?void 0:n.isConnected)===null||s===void 0||s}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Ue(this,e,t),nt(e)?e===U||e==null||e===""?(this._$AH!==U&&this._$AR(),this._$AH=U):e!==this._$AH&&e!==Ee&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.S(e):Mn(e)?this.M(e):this.$(e)}A(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}S(e){this._$AH!==e&&(this._$AR(),this._$AH=this.A(e))}$(e){this._$AH!==U&&nt(this._$AH)?this._$AA.nextSibling.data=e:this.S(He.createTextNode(e)),this._$AH=e}T(e){var t;let{values:i,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Ne.createElement(n.h,this.options)),n);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===s)this._$AH.m(i);else{let o=new Qi(s,this),h=o.p(this.options);o.m(i),this.S(h),this._$AH=o}}_$AC(e){let t=Yi.get(e.strings);return t===void 0&&Yi.set(e.strings,t=new Ne(e)),t}M(e){Vi(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,i,n=0;for(let s of e)n===t.length?t.push(i=new Me(this.A(it()),this.A(it()),this,this.options)):i=t[n],i._$AI(s),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){let n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cg=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}},st=class{constructor(e,t,i,n,s){this.type=1,this._$AH=U,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=U}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){let s=this.strings,o=!1;if(s===void 0)e=Ue(this,e,t,0),o=!nt(e)||e!==this._$AH&&e!==Ee,o&&(this._$AH=e);else{let h=e,c,f;for(e=s[0],c=0;c<s.length-1;c++)f=Ue(this,h[i+c],t,c),f===Ee&&(f=this._$AH[c]),o||(o=!nt(f)||f!==this._$AH[c]),f===U?e=U:e!==U&&(e+=(f!=null?f:"")+s[c+1]),this._$AH[c]=f}o&&!n&&this.k(e)}k(e){e===U?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}},en=class extends st{constructor(){super(...arguments),this.type=3}k(e){this.element[this.name]=e===U?void 0:e}},tn=class extends st{constructor(){super(...arguments),this.type=4}k(e){e&&e!==U?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}},nn=class extends st{constructor(e,t,i,n,s){super(e,t,i,n,s),this.type=5}_$AI(e,t=this){var i;if((e=(i=Ue(this,e,t,0))!==null&&i!==void 0?i:U)===Ee)return;let n=this._$AH,s=e===U&&n!==U||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==U&&(n===U||s);s&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}},rn=class{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Ue(this,e)}};var sn=window.litHtmlPolyfillSupport;sn==null||sn(Ne,Me),((ei=globalThis.litHtmlVersions)!==null&&ei!==void 0?ei:globalThis.litHtmlVersions=[]).push("2.0.1");var ti,ii;var Se=class extends pe{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;let i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=Zi(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return Ee}};Se.finalized=!0,Se._$litElement$=!0,(ti=globalThis.litElementHydrateSupport)===null||ti===void 0||ti.call(globalThis,{LitElement:Se});var on=globalThis.litElementPolyfillSupport;on==null||on({LitElement:Se});((ii=globalThis.litElementVersions)!==null&&ii!==void 0?ii:globalThis.litElementVersions=[]).push("3.0.1");var ln=bn(an());var hn=class extends Se{static get styles(){return Gt`
      :host {
        display: block;
        padding: 25px;
        color: var(--live-element-text-color, #000);
      }
    `}static get properties(){return{title:{type:String},counter:{type:Number},module:{type:String},url:{type:String}}}connectedCallback(){super.connectedCallback(),this.liveSocket=new De(this.url,ln.Socket,{}),this.liveSocket.enableDebug(),this.liveSocket.socket.connect(),this.view=new fe(this,this.liveSocket,null,null),this.liveSocket.roots[this.view.id]=this.view,this.view.channel=this.liveSocket.channel(`lve:${this.id}`,()=>({params:{module:this.module},session:{}})),this.view.setHref(this.liveSocket.getHref()),this.view.join()}constructor(){super()}firstUpdated(){this.renderRoot.addEventListener("click",e=>{console.log(e);let{target:t}=e,i=t&&t.getAttribute("phx-click");!i||this.view.pushEvent("click",this,this,i,{})},!0),this.renderRoot.addEventListener("submit",e=>{console.log(e);let{target:t}=e;e.preventDefault();let i=e.target.getAttribute("phx-submit");!i||this.view.submitForm(e.target,this.renderRoot,i)},!0)}viewUpdated(){console.log("view updated")}__increment(){this.counter+=1}},cn=hn;return Fn;})();
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
